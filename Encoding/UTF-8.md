### Incorrect string value: '\xF0\x9F\x92\x83' for column 'content' at row 1

æœ€è¿‘é¡¹ç›®ä¸­é­é‡äº†è¿™ä¸ªMySQLçš„æŠ¥é”™ä¿¡æ¯ï¼Œå…·ä½“æƒ…å¢ƒæ˜¯è¿™æ ·çš„ï¼š

  1. MySQLæ•°æ®è¡¨charset=utf8ï¼Œcontentå­—æ®µç±»åž‹ longtext
  2. æ’å…¥æ•°æ®å¦‚ä¸‹ï¼ˆç®€åŒ–ç‰ˆï¼‰: INSERT INTO tb_article(content) VALUES ('ðŸ’ƒ');
  3. è¿™ä¸ªå¥‡æ€ªçš„ç¬¦å·æ˜¯ä»Žç½‘ä¸Šçˆ¬å–çš„æ–‡ç« å†…å®¹ä¸­çš„ä¸€ä¸ªemojiï¼Œç„¶åŽæ’å…¥åˆ°mysqlæ–‡ç« ä¿¡æ¯è¡¨ä¸­

ç½‘ä¸ŠæŸ¥åˆ°çš„èµ„æ–™ç»™çš„è§£å†³æ–¹æ¡ˆæ˜¯å°† mysql è¡¨çš„ç¼–ç è°ƒæ•´ä¸º utf8-mb4ï¼Œè¿™æ ·ä½¿mysqlèƒ½å¤Ÿå­˜å‚¨é•¿åº¦ä¸º4ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œå†æ¬¡æ‰§è¡Œç±»ä¼¼çš„æ’å…¥æ“ä½œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚
ç„¶åŽå°±äº§ç”Ÿäº†å‡ ä¸ªé—®é¢˜ï¼š

  1. mysqlä¸ºä»€ä¹ˆä¸æ”¯æŒ4å­—èŠ‚å­—ç¬¦ï¼Ÿ
  2. mysqlä¸­çš„utf8å’Œutf8-mb4åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
  3. utf-8ç¼–ç æ˜¯æ€Žä¹ˆå¤„ç†å¤šå­—èŠ‚å­—ç¬¦çš„ï¼Ÿ

å¯¹äºŽé—®é¢˜1å’Œ2ä¸‹é¢æœ‰ä¸€æ®µç®€çŸ­çš„è§£é‡Šï¼Œæ‘˜æŠ„è‡ªç½‘ç»œï¼š

---------
>MySQLæ•°æ®åº“çš„ â€œutf8â€å¹¶ä¸æ˜¯çœŸæ­£æ¦‚å¿µé‡Œçš„Â UTF-8ã€‚
MySQLä¸­çš„â€œutf8â€ç¼–ç åªæ”¯æŒæœ€å¤§3å­—èŠ‚æ¯å­—ç¬¦ã€‚çœŸæ­£çš„å¤§å®¶æ­£åœ¨ä½¿ç”¨çš„UTF-8ç¼–ç æ˜¯åº”è¯¥èƒ½æ”¯æŒ4å­—èŠ‚æ¯ä¸ªå­—ç¬¦ã€‚
MySQLçš„å¼€å‘è€…æ²¡æœ‰ä¿®å¤è¿™ä¸ªbugã€‚ä»–ä»¬åœ¨2010å¹´å¢žåŠ äº†ä¸€ä¸ªå˜é€šçš„æ–¹æ³•ï¼šä¸€ä¸ªæ–°çš„å­—ç¬¦é›†â€œutf8mb4â€
å½“ç„¶ï¼Œä»–ä»¬å¹¶æ²¡æœ‰å¯¹å¤–å…¬å¸ƒï¼ˆå¯èƒ½å› ä¸ºè¿™ä¸ªbugæœ‰ç‚¹å°´å°¬ï¼‰ã€‚çŽ°åœ¨å¾ˆå¤šæŒ‡å—æŽ¨èç”¨æˆ·ä½¿ç”¨â€œutf8â€å…¶å®žéƒ½é”™äº†ã€‚

>ç®€å•çš„è¯´:
MySQLä¸­çš„ â€œutf8mb4â€ æ‰æ˜¯ çœŸæ­£æ„ä¹‰ä¸Šçš„â€œUTF-8â€ã€‚
MySQLçš„â€œutf8â€æ˜¯ä¸ªâ€œç‰¹æ®Šçš„å­—ç¬¦ç¼–ç â€ã€‚è¿™ç§ç¼–ç å¾ˆå¤šUnicodeå­—ç¬¦ä¿å­˜ä¸äº†ã€‚

è½¬è½½å¤„ : https://www.jianshu.com/p/ab9aa8d4df7d?openInApp=1

---------

çœ‹å®Œè¿™ä¸ªè§£é‡Šä¹‹åŽåº”è¯¥æœ‰äººä¼šæƒ³åæ§½mysqlå¯¹utf-8çš„æ”¯æŒå§ï¼Œä¸è¿‡è¿™ä¸ªè§£é‡Šåˆå¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š

  4. Unicodeåˆæ˜¯ä»€ä¹ˆç¼–ç ï¼Ÿ

æ‰€ä»¥ï¼Œæˆ‘ä»¬çŽ°åœ¨æœ‰ä¸¤ä¸ªé—®é¢˜äº†ï¼Œé—®é¢˜3å’Œé—®é¢˜4ï¼Œç„¶è€Œè¿™ä¸¤ä¸ªé—®é¢˜å…¶å®žå°±æ˜¯å­—ç¬¦é›†ç¼–ç çš„é—®é¢˜ï¼Œå¦‚æžœå¼„æ˜Žç™½äº†å­—ç¬¦ç¼–ç ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜å°±æ˜Žç™½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å‰©ä¸‹ä¸€ä¸ªç»ˆæžé—®é¢˜ï¼š

  1024. è®¡ç®—æœºå¦‚ä½•å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿï¼Ÿ
  
  ---------------
  
  è®¨è®ºå­—ç¬¦ç¼–ç é¦–å…ˆéœ€è¦çŸ¥é“çš„ä¸€äº›æ¦‚å¿µï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼šASCIIï¼ŒUnicode å’Œ UTF-8
  
  ####  ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾Žå›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰
  
  >æˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœºå†…éƒ¨ï¼Œæ‰€æœ‰ä¿¡æ¯æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰æœ‰0å’Œ1ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤å…«ä¸ªäºŒè¿›åˆ¶ä½å°±å¯ä»¥ç»„åˆå‡º256ç§çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå­—èŠ‚ä¸€å…±å¯ä»¥ç”¨æ¥è¡¨ç¤º256ç§ä¸åŒçš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç¬¦å·ï¼Œå°±æ˜¯256ä¸ªç¬¦å·ï¼Œä»Ž00000000åˆ°11111111ã€‚

>ä¸Šä¸ªä¸–çºª60å¹´ä»£ï¼Œç¾Žå›½åˆ¶å®šäº†ä¸€å¥—å­—ç¬¦ç¼–ç ï¼Œå¯¹è‹±è¯­å­—ç¬¦ä¸ŽäºŒè¿›åˆ¶ä½ä¹‹é—´çš„å…³ç³»ï¼Œåšäº†ç»Ÿä¸€è§„å®šã€‚è¿™è¢«ç§°ä¸º ASCII ç ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚

>ASCII ç ä¸€å…±è§„å®šäº†128ä¸ªå­—ç¬¦çš„ç¼–ç ï¼Œæ¯”å¦‚ç©ºæ ¼SPACEæ˜¯32ï¼ˆäºŒè¿›åˆ¶00100000ï¼‰ï¼Œå¤§å†™çš„å­—æ¯Aæ˜¯65ï¼ˆäºŒè¿›åˆ¶01000001ï¼‰ã€‚è¿™128ä¸ªç¬¦å·ï¼ˆåŒ…æ‹¬32ä¸ªä¸èƒ½æ‰“å°å‡ºæ¥çš„æŽ§åˆ¶ç¬¦å·ï¼‰ï¼Œåªå ç”¨äº†ä¸€ä¸ªå­—èŠ‚çš„åŽé¢7ä½ï¼Œæœ€å‰é¢çš„ä¸€ä½ç»Ÿä¸€è§„å®šä¸º0ã€‚

>å¼•ç”¨è‡ªï¼šhttp://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html
 
